<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Money Flow</title>
  </head>
  <body>
    <app-root></app-root>
    <script>
      window.__MONEY_FLOW_BUILD__ = { version: 'unknown', builtAt: 'unknown' };
      fetch('/build-info.json', { cache: 'no-store' })
        .then(async (response) => {
          if (!response.ok) {
            return null;
          }
          const contentType = String(response.headers.get('content-type') ?? '');
          if (!contentType.includes('application/json')) {
            return null;
          }
          try {
            return await response.json();
          } catch {
            return null;
          }
        })
        .then((info) => {
          if (!info || typeof info !== 'object') {
            return;
          }
          window.__MONEY_FLOW_BUILD__ = {
            version: String(info.version ?? 'unknown'),
            builtAt: String(info.builtAt ?? 'unknown'),
          };
          console.info(
            `[money-flow] build ${window.__MONEY_FLOW_BUILD__.version} (${window.__MONEY_FLOW_BUILD__.builtAt})`,
          );
        })
        .catch(() => {});
    </script>
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
